<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suzanne Tyler - Homework 7</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
crossorigin=""></script>

<script src = "./pt.js"></script>

<style> 
    #map {height: 500px; width: 800px}
</style>

</head>

<body>
    <h2>Homework 7: Make a Leaflet Map with a Slider Conotrolled Temporal Element</h2>
    <h3>Percent Public Transit Commutes by Year</h3>
    <h3 id = "theYear">Year</h3>

        <input type="range" name="year" value="2010" min="2010" max="2022" oninput="moveSlider(this.value)">
        <div id="map"></div>
        <div class="legend"></div>

    <div id="map"></div> 
    <script> 

        var map = L.map('map').setView([38.548165, -96.503906], 4);
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19, 
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map); 

        var selectedYear = "2010"

        function myStyle(feature) {
            return {
                "fillColor": getColor(feature.properties[selectedYear]), 
                "color": "black",
                "weight": 0.75,
                "opacity": 2.0,
                "fillOpacity": 0.7
            }
        }

        function getColor(percent) { 
            return percent < 2 ? "#f7fbff" 
            :percent < 5 ? "#9ecae1" 
            :percent < 10 ? "#4292c6"
            : "#08306b";
        }

        var publicTransit = L.geoJSON(pt, {style: myStyle}).addTo(map);

        // function moveSlider(value) {
        //     selectedYear = value; 
        //     map.removeLayer(publicTransit); // leaflet method to remove a layer
        //     publicTransit = L.geoJSON(publicTransit, {style: myStyle});
        //     map.addLayer(publicTransit); // add the new layer
        //     document.getElementById('theYear').innerHTML = 'Year: '+ value  
        // }
        // moveSlider('2010')

    </script>

</body>
</html>